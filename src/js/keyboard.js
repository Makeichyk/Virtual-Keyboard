const KEYS_CONFIG = {
    Backquote: {
        keyId: "Backquote", // event.code
        eng: {
            value: "`",
            alt: "~",
        },
        rus: {
            value: "ё",
            alt: "Ё",
        },
    },
    Digit1: {
        keyId: "Digit1",
        eng: {
            value: "1",
            alt: "!",
        },
        rus: {
            value: "1",
            alt: "!",
        },
    },
    Digit2: {
        keyId: "Digit2",
        eng: {
            value: "2",
            alt: "@",
        },
        rus: {
            value: "2",
            // eslint-disable-next-line quotes
            alt: '"',
        },
    },
    Digit3: {
        keyId: "Digit3",
        eng: {
            value: "3",
            alt: "#",
        },
        rus: {
            value: "3",
            alt: "№",
        },
    },
    Digit4: {
        keyId: "Digit4",
        eng: {
            value: "4",
            alt: "$",
        },
        rus: {
            value: "4",
            alt: ";",
        },
    },
    Digit5: {
        keyId: "Digit5",
        eng: {
            value: "5",
            alt: "%",
        },
        rus: {
            value: "5",
            alt: "%",
        },
    },
    Digit6: {
        keyId: "Digit6",
        eng: {
            value: "6",
            alt: "^",
        },
        rus: {
            value: "6",
            alt: ":",
        },
    },
    Digit7: {
        keyId: "Digit7",
        eng: {
            value: "7",
            alt: "&amp;",
        },
        rus: {
            value: "7",
            alt: "?",
        },
    },
    Digit8: {
        keyId: "Digit8",
        eng: {
            value: "8",
            alt: "*",
        },
        rus: {
            value: "8",
            alt: "*",
        },
    },
    Digit9: {
        keyId: "Digit9",
        eng: {
            value: "9",
            alt: "(",
        },
        rus: {
            value: "9",
            alt: "(",
        },
    },
    Digit0: {
        keyId: "Digit0",
        eng: {
            value: "0",
            alt: ")",
        },
        rus: {
            value: "0",
            alt: ")",
        },
    },
    Minus: {
        keyId: "Minus",
        eng: {
            value: "-",
            alt: "_",
        },
        rus: {
            value: "-",
            alt: "_",
        },
    },
    Equal: {
        keyId: "Equal",
        eng: {
            value: "=",
            alt: "+",
        },
        rus: {
            value: "=",
            alt: "+",
        },
    },
    Backspace: {
        keyId: "Backspace",
        eng: {
            value: "Backspace",
            alt: "Backspace",
        },
        rus: {
            value: "Backspace",
            alt: "Backspace",
        },
    },
    Tab: {
        keyId: "Tab",
        eng: {
            value: "TAB",
            alt: "TAB",
        },
        rus: {
            value: "TAB",
            alt: "TAB",
        },
        specialSymbol: "\t",
    },
    KeyQ: {
        keyId: "KeyQ",
        eng: {
            value: "q",
            alt: "Q",
        },
        rus: {
            value: "й",
            alt: "Й",
        },
    },
    KeyW: {
        keyId: "KeyW",
        eng: {
            value: "w",
            alt: "W",
        },
        rus: {
            value: "ц",
            alt: "Ц",
        },
    },
    KeyE: {
        keyId: "KeyE",
        eng: {
            value: "e",
            alt: "E",
        },
        rus: {
            value: "у",
            alt: "У",
        },
    },
    KeyR: {
        keyId: "KeyR",
        eng: {
            value: "r",
            alt: "R",
        },
        rus: {
            value: "к",
            alt: "К",
        },
    },
    KeyT: {
        keyId: "KeyT",
        eng: {
            value: "t",
            alt: "T",
        },
        rus: {
            value: "е",
            alt: "Е",
        },
    },
    KeyY: {
        keyId: "KeyY",
        eng: {
            value: "y",
            alt: "Y",
        },
        rus: {
            value: "н",
            alt: "Н",
        },
    },
    KeyU: {
        keyId: "KeyU",
        eng: {
            value: "u",
            alt: "U",
        },
        rus: {
            value: "г",
            alt: "Г",
        },
    },
    KeyI: {
        keyId: "KeyI",
        eng: {
            value: "i",
            alt: "I",
        },
        rus: {
            value: "ш",
            alt: "Ш",
        },
    },
    KeyO: {
        keyId: "KeyO",
        eng: {
            value: "o",
            alt: "O",
        },
        rus: {
            value: "щ",
            alt: "Щ",
        },
    },
    KeyP: {
        keyId: "KeyP",
        eng: {
            value: "p",
            alt: "P",
        },
        rus: {
            value: "з",
            alt: "З",
        },
    },
    BracketLeft: {
        keyId: "BracketLeft",
        eng: {
            value: "[",
            alt: "{",
        },
        rus: {
            value: "х",
            alt: "Х",
        },
    },
    BracketRight: {
        keyId: "BracketRight",
        eng: {
            value: "]",
            alt: "}",
        },
        rus: {
            value: "ъ",
            alt: "Ъ",
        },
    },
    Backslash: {
        keyId: "Backslash",
        eng: {
            value: "\\",
            alt: "|",
        },
        rus: {
            value: "\\",
            alt: "/",
        },
    },
    Delete: {
        keyId: "Delete",
        eng: {
            value: "DEL",
            alt: "DEL",
        },
        rus: {
            value: "DEL",
            alt: "DEL",
        },
    },
    CapsLock: {
        keyId: "CapsLock",
        eng: {
            value: "Caps lock",
            alt: "Caps lock",
        },
        rus: {
            value: "Caps lock",
            alt: "Caps lock",
        },
    },
    KeyA: {
        keyId: "KeyA",
        eng: {
            value: "a",
            alt: "A",
        },
        rus: {
            value: "ф",
            alt: "Ф",
        },
    },
    KeyS: {
        keyId: "KeyS",
        eng: {
            value: "s",
            alt: "S",
        },
        rus: {
            value: "ы",
            alt: "Ы",
        },
    },
    KeyD: {
        keyId: "KeyD",
        eng: {
            value: "d",
            alt: "D",
        },
        rus: {
            value: "в",
            alt: "В",
        },
    },
    KeyF: {
        keyId: "KeyF",
        eng: {
            value: "f",
            alt: "F",
        },
        rus: {
            value: "а",
            alt: "А",
        },
    },
    KeyG: {
        keyId: "KeyG",
        eng: {
            value: "g",
            alt: "G",
        },
        rus: {
            value: "п",
            alt: "П",
        },
    },
    KeyH: {
        keyId: "KeyH",
        eng: {
            value: "h",
            alt: "H",
        },
        rus: {
            value: "р",
            alt: "Р",
        },
    },
    KeyJ: {
        keyId: "KeyJ",
        eng: {
            value: "j",
            alt: "J",
        },
        rus: {
            value: "о",
            alt: "О",
        },
    },
    KeyK: {
        keyId: "KeyK",
        eng: {
            value: "k",
            alt: "K",
        },
        rus: {
            value: "л",
            alt: "Л",
        },
    },
    KeyL: {
        keyId: "KeyL",
        eng: {
            value: "l",
            alt: "L",
        },
        rus: {
            value: "д",
            alt: "Д",
        },
    },
    Semicolon: {
        keyId: "Semicolon",
        eng: {
            value: ";",
            alt: ":",
        },
        rus: {
            value: "ж",
            alt: "Ж",
        },
    },
    Quote: {
        keyId: "Quote",
        eng: {
            value: "'",
            // eslint-disable-next-line quotes
            alt: '"',
        },
        rus: {
            value: "э",
            alt: "Э",
        },
    },
    Enter: {
        keyId: "Enter",
        eng: {
            value: "Enter",
            alt: "Enter",
        },
        rus: {
            value: "Enter",
            alt: "Enter",
        },
        specialSymbol: "\n",
    },
    ShiftLeft: {
        keyId: "ShiftLeft",
        eng: {
            value: "Shift",
            alt: "Shift",
        },
        rus: {
            value: "Shift",
            alt: "Shift",
        },
    },
    KeyZ: {
        keyId: "KeyZ",
        eng: {
            value: "z",
            alt: "Z",
        },
        rus: {
            value: "я",
            alt: "Я",
        },
    },
    KeyX: {
        keyId: "KeyX",
        eng: {
            value: "x",
            alt: "X",
        },
        rus: {
            value: "ч",
            alt: "Ч",
        },
    },
    KeyC: {
        keyId: "KeyC",
        eng: {
            value: "c",
            alt: "C",
        },
        rus: {
            value: "с",
            alt: "С",
        },
    },
    KeyV: {
        keyId: "KeyV",
        eng: {
            value: "v",
            alt: "V",
        },
        rus: {
            value: "м",
            alt: "М",
        },
    },
    KeyB: {
        keyId: "KeyB",
        eng: {
            value: "b",
            alt: "B",
        },
        rus: {
            value: "и",
            alt: "И",
        },
    },
    KeyN: {
        keyId: "KeyN",
        eng: {
            value: "n",
            alt: "N",
        },
        rus: {
            value: "т",
            alt: "Т",
        },
    },
    KeyM: {
        keyId: "KeyM",
        eng: {
            value: "m",
            alt: "M",
        },
        rus: {
            value: "ь",
            alt: "Ь",
        },
    },
    Comma: {
        keyId: "Comma",
        eng: {
            value: ",",
            alt: "&lt;",
        },
        rus: {
            value: "б",
            alt: "Б",
        },
    },
    Period: {
        keyId: "Period",
        eng: {
            value: ".",
            alt: "&gt;",
        },
        rus: {
            value: "ю",
            alt: "Ю",
        },
    },
    Slash: {
        keyId: "Slash",
        eng: {
            value: "/",
            alt: "?",
        },
        rus: {
            value: ".",
            alt: ",",
        },
    },
    ShiftRight: {
        keyId: "ShiftRight",
        eng: {
            value: "Shift",
            alt: "Shift",
        },
        rus: {
            value: "Shift",
            alt: "Shift",
        },
    },
    ControlLeft: {
        keyId: "ControlLeft",
        eng: {
            value: "Ctrl",
            alt: "Ctrl",
        },
        rus: {
            value: "Ctrl",
            alt: "Ctrl",
        },
    },
    MetaLeft: {
        keyId: "MetaLeft",
        eng: {
            value: "Win",
            alt: "Win",
        },
        rus: {
            value: "Win",
            alt: "Win",
        },
    },
    AltLeft: {
        keyId: "AltLeft",
        eng: {
            value: "Alt",
            alt: "Alt",
        },
        rus: {
            value: "Alt",
            alt: "Alt",
        },
    },
    Space: {
        keyId: "Space",
        eng: {
            value: "",
            alt: "",
        },
        rus: {
            value: "",
            alt: "",
        },
        specialSymbol: " ",
    },
    AltRight: {
        keyId: "AltRight",
        eng: {
            value: "Alt",
            alt: "Alt",
        },
        rus: {
            value: "Alt",
            alt: "Alt",
        },
    },
    ControlRight: {
        keyId: "ControlRight",
        eng: {
            value: "Ctrl",
            alt: "Ctrl",
        },
        rus: {
            value: "Ctrl",
            alt: "Ctrl",
        },
    },
    ArrowLeft: {
        keyId: "ArrowLeft",
        eng: {
            value: "◀",
            alt: "◀",
        },
        rus: {
            value: "◀",
            alt: "◀",
        },
    },
    ArrowUp: {
        keyId: "ArrowUp",
        eng: {
            value: "▲",
            alt: "▲",
        },
        rus: {
            value: "▲",
            alt: "▲",
        },
    },
    ArrowDown: {
        keyId: "ArrowDown",
        eng: {
            value: "▼",
            alt: "▼",
        },
        rus: {
            value: "▼",
            alt: "▼",
        },
    },
    ArrowRight: {
        keyId: "ArrowRight",
        eng: {
            value: "▶",
            alt: "▶",
        },
        rus: {
            value: "▶",
            alt: "▶",
        },
    },
};

const KEYBOARD_CONFIG = {
    ROW_0: [
        KEYS_CONFIG.Backquote,
        KEYS_CONFIG.Digit1,
        KEYS_CONFIG.Digit2,
        KEYS_CONFIG.Digit3,
        KEYS_CONFIG.Digit4,
        KEYS_CONFIG.Digit5,
        KEYS_CONFIG.Digit6,
        KEYS_CONFIG.Digit7,
        KEYS_CONFIG.Digit8,
        KEYS_CONFIG.Digit9,
        KEYS_CONFIG.Digit0,
        KEYS_CONFIG.Minus,
        KEYS_CONFIG.Equal,
        KEYS_CONFIG.Backspace,
    ],
    ROW_1: [
        KEYS_CONFIG.Tab,
        KEYS_CONFIG.KeyQ,
        KEYS_CONFIG.KeyW,
        KEYS_CONFIG.KeyE,
        KEYS_CONFIG.KeyR,
        KEYS_CONFIG.KeyT,
        KEYS_CONFIG.KeyY,
        KEYS_CONFIG.KeyU,
        KEYS_CONFIG.KeyI,
        KEYS_CONFIG.KeyO,
        KEYS_CONFIG.KeyP,
        KEYS_CONFIG.BracketLeft,
        KEYS_CONFIG.BracketRight,
        KEYS_CONFIG.Backslash,
        KEYS_CONFIG.Delete,
    ],
    ROW_2: [
        KEYS_CONFIG.CapsLock,
        KEYS_CONFIG.KeyA,
        KEYS_CONFIG.KeyS,
        KEYS_CONFIG.KeyD,
        KEYS_CONFIG.KeyF,
        KEYS_CONFIG.KeyG,
        KEYS_CONFIG.KeyH,
        KEYS_CONFIG.KeyJ,
        KEYS_CONFIG.KeyK,
        KEYS_CONFIG.KeyL,
        KEYS_CONFIG.Semicolon,
        KEYS_CONFIG.Quote,
        KEYS_CONFIG.Enter,
    ],
    ROW_3: [
        KEYS_CONFIG.ShiftLeft,
        KEYS_CONFIG.KeyZ,
        KEYS_CONFIG.KeyX,
        KEYS_CONFIG.KeyC,
        KEYS_CONFIG.KeyV,
        KEYS_CONFIG.KeyB,
        KEYS_CONFIG.KeyN,
        KEYS_CONFIG.KeyM,
        KEYS_CONFIG.Comma,
        KEYS_CONFIG.Period,
        KEYS_CONFIG.Slash,
        KEYS_CONFIG.ShiftRight,
    ],
    ROW_4: [
        KEYS_CONFIG.ControlLeft,
        KEYS_CONFIG.MetaLeft,
        KEYS_CONFIG.AltLeft,
        KEYS_CONFIG.Space,
        KEYS_CONFIG.AltRight,
        KEYS_CONFIG.ControlRight,
        KEYS_CONFIG.ArrowLeft,
        [KEYS_CONFIG.ArrowUp, KEYS_CONFIG.ArrowDown],
        KEYS_CONFIG.ArrowRight,
    ],
};

const RUSSIAN_LETTERS = [
    KEYS_CONFIG.Backquote,
    KEYS_CONFIG.BracketLeft,
    KEYS_CONFIG.BracketRight,
    KEYS_CONFIG.Semicolon,
    KEYS_CONFIG.Quote,
    KEYS_CONFIG.Comma,
    KEYS_CONFIG.Period,
    KEYS_CONFIG.KeyQ,
    KEYS_CONFIG.KeyW,
    KEYS_CONFIG.KeyE,
    KEYS_CONFIG.KeyR,
    KEYS_CONFIG.KeyT,
    KEYS_CONFIG.KeyY,
    KEYS_CONFIG.KeyU,
    KEYS_CONFIG.KeyI,
    KEYS_CONFIG.KeyO,
    KEYS_CONFIG.KeyP,
    KEYS_CONFIG.KeyA,
    KEYS_CONFIG.KeyS,
    KEYS_CONFIG.KeyD,
    KEYS_CONFIG.KeyF,
    KEYS_CONFIG.KeyG,
    KEYS_CONFIG.KeyH,
    KEYS_CONFIG.KeyJ,
    KEYS_CONFIG.KeyK,
    KEYS_CONFIG.KeyL,
    KEYS_CONFIG.KeyZ,
    KEYS_CONFIG.KeyX,
    KEYS_CONFIG.KeyC,
    KEYS_CONFIG.KeyV,
    KEYS_CONFIG.KeyB,
    KEYS_CONFIG.KeyN,
    KEYS_CONFIG.KeyM,
];
const ENGLISH_LETTERS = [
    KEYS_CONFIG.KeyQ,
    KEYS_CONFIG.KeyW,
    KEYS_CONFIG.KeyE,
    KEYS_CONFIG.KeyR,
    KEYS_CONFIG.KeyT,
    KEYS_CONFIG.KeyY,
    KEYS_CONFIG.KeyU,
    KEYS_CONFIG.KeyI,
    KEYS_CONFIG.KeyO,
    KEYS_CONFIG.KeyP,
    KEYS_CONFIG.KeyA,
    KEYS_CONFIG.KeyS,
    KEYS_CONFIG.KeyD,
    KEYS_CONFIG.KeyF,
    KEYS_CONFIG.KeyG,
    KEYS_CONFIG.KeyH,
    KEYS_CONFIG.KeyJ,
    KEYS_CONFIG.KeyK,
    KEYS_CONFIG.KeyL,
    KEYS_CONFIG.KeyZ,
    KEYS_CONFIG.KeyX,
    KEYS_CONFIG.KeyC,
    KEYS_CONFIG.KeyV,
    KEYS_CONFIG.KeyB,
    KEYS_CONFIG.KeyN,
    KEYS_CONFIG.KeyM,
];

const keyMap = (keyConfig) => {
    return `<div class="keyboard-key key ${keyConfig.keyId}" data-key-code="${keyConfig.keyId}">
        ${keyMapEng(keyConfig)}
        ${keyMapRus(keyConfig)}
    </div>`;
};

const keyMapEng = (keyConfig) => {
    const isEngLetter = ENGLISH_LETTERS.includes(keyConfig);
    return isEngLetter
        ? `<span class="eng language">
        <span class="caseDown">${keyConfig.eng.value}</span>
        <span class="shiftCaps">${keyConfig.eng.value}</span>
        <span class="caseUp">${keyConfig.eng.alt}</span>
        <span class="caps">${keyConfig.eng.alt}</span>
    </span>`
        : `<span class="eng language">
        <span class="caseDown">${keyConfig.eng.value}</span>
        <span class="shiftCaps">${keyConfig.eng.alt}</span>
        <span class="caseUp">${keyConfig.eng.alt}</span>
        <span class="caps">${keyConfig.eng.value}</span>
    </span>`;
};

const keyMapRus = (keyConfig) => {
    const isRusLetter = RUSSIAN_LETTERS.includes(keyConfig);
    return isRusLetter
        ? `<span class="rus language">
        <span class="caseDown">${keyConfig.rus.value}</span>
        <span class="shiftCaps">${keyConfig.rus.value}</span>
        <span class="caseUp">${keyConfig.rus.alt}</span>
        <span class="caps">${keyConfig.rus.alt}</span>
    </span>`
        : `<span class="rus language">
        <span class="caseDown">${keyConfig.rus.value}</span>
        <span class="shiftCaps">${keyConfig.rus.alt}</span>
        <span class="caseUp">${keyConfig.rus.alt}</span>
        <span class="caps">${keyConfig.rus.value}</span>
    </span>`;
};

const rowMap = (rowConfig, index) => `<div class="keyboard-row row-${index}">
        ${rowConfig
            .map((keyConfig) => {
                if (Array.isArray(keyConfig)) {
                    return `
                        <div class="keyboard-group">
                            ${keyConfig.map((key) => keyMap(key)).join("")}
                        </div>
                    `;
                }
                return keyMap(keyConfig);
            })
            .join("")}
    </div>`;

const keyboardMap = (keyboardConfig, language, isCaps) => {
    const rowConfigs = Object.values(keyboardConfig);

    return `<div class="keyboard" id="keyboard" data-lang="${language}" data-caps-lock="${false}" data-shift="${false}">
        ${rowConfigs.map((rowConfig, index) => rowMap(rowConfig, index)).join("")}
    </div>`;
};

const initKeyboard = (language = "eng", isCaps = false) =>
    keyboardMap(KEYBOARD_CONFIG, language, isCaps);

const isLetter = (language, eventCode) => {
    switch (language) {
        case "eng":
            return ENGLISH_LETTERS.map((config) => config.keyId).includes(eventCode);
            break;
        case "rus":
            return RUSSIAN_LETTERS.map((config) => config.keyId).includes(eventCode);
            break;
        default:
            console.error("Unsupported language");
    }
};

export { initKeyboard, KEYS_CONFIG, isLetter };
